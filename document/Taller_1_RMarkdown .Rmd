---
title: "Problem Set 1 RMarkdown"
author: "Irina Vélez - Lucía Fillippo - Daniel Casas - Miguel Victoria"
date: "2023-06-21"
output: word_document
---
```{r setup, include=FALSE}
# install pacman
if(!require(pacman)) install.packages("pacman") ; require(pacman)

## Automatiza cargue de paquetes
require(pacman)
p_load(rio, # import/export data
       tidyverse, # tidy-data
       skimr, # summary data
       caret,
       rstudioapi,
       rvest) # Classification And REgression Training
```

```{r path, include=FALSE}
# Directorio 
rm(list=ls())
getwd()
path_sript <- rstudioapi::getActiveDocumentContext()$path
path_folder <- dirname(path_sript)
setwd(path_folder)
```

# Taller 1

El presente informe presenta la solución al Problem Set 1 de la clase Big Data & Machine Learning, en donde se aplicaron diversos conceptos y herramientas para la predicción de modelos, el manejo de bases de datos grandes, entre otros. El repositorio GitHub se encuentra este documento y el código R, en donde se generaron todos los resultados. Este repositorio se encuentra en el siguiente link: (link del Github con el código)

## 1. Introducción

Conocer el valor de los ingresos de las personas es fundamental para el pago de impuestos y para identificar a los hogares que requieren apoyos sociales; no obstante, en algunas ocasiones estos valores no se conocen al no ser reportados, de manera que poder determinar su valor se convierte en un gran insumo para el desarrollo de políticas tributarias y sociales. Con objeto de lo anterior, el objetivo principal de este documento es construir un modelo predictivo de los salarios por hora de los individuos, a partir del siguiente modelo:


$$
w=f(X)+u
$$

donde w representa el salario por hora y X es una matriz de potenciales variables que explican el salario. Para la creación de este modelo se utilizarán datos de la Gran Encuesta Integrada de Hogares – GEIH del año 2018. 

Para importar los datos, es importante conocer qué tipo de página web contiene la información, en este caso, la página web que contiene las bases de datos es dinámica, por lo que es pertinente identificar el link principal del cual se realizará la extracción de la información; además, se apliará un código en bucle para que la extracción de la informacíon sea más eficiente.Por último, como fue indicado, se realiza un primer filtro para tener en cuenta únicamente los individuos mayores de 18 años.

```{r Import_data, eval=FALSE, include=FALSE}
## Revisión preliminar
#1

# url1 <- "https://ignaciomsarmiento.github.io/GEIH2018_sample/pages/geih_page_1.html"
# prueba1 <- read_html(url1)
# prueba1_tablas <- prueba1 %>% 
#   html_table()
# prueba_data_frame1 <- data.frame(prueba1_tablas)
# 
# #2
# 
# url2 <- "https://ignaciomsarmiento.github.io/GEIH2018_sample/pages/geih_page_2.html"
# prueba2 <- read_html(url2)
# prueba_tablas2 <- prueba2 %>% 
#   html_table()
# prueba_data_frame2 <- data.frame(prueba_tablas2)


## Creación del loop
# Crear un data frame vacío para almacenar las tablas
datos <- data.frame()

for (i in 1:10) {
  # Paso 1: Construir la URL
  url <- paste0("https://ignaciomsarmiento.github.io/GEIH2018_sample/pages/geih_page_", i, ".html")
  
  # Paso 2: Leer el HTML de la URL
  prueba <- read_html(url)
  
  # Paso 3: Extraer las tablas del HTML
  tablas <- prueba %>% html_table()
  
  # Paso 4: Convertir la tabla en data frame
  tabla <- data.frame(tablas)
  
  # Paso 5: Concatenar la tabla al data frame final
  datos <- rbind(datos, tabla)
}
rm(prueba)
rm(tabla)
rm(tablas)

# Revisión preliminar
head(datos)
any(grepl("directorio", datos$directorio))
which(datos$directorio == 0)
```

```{r limpiar_base, include=FALSE}
# Filtro adultos
Datos_18<- datos %>%  filter(age>18)
summary(Datos_18$age)

# Primera columna


# Columna Bogota

#



# Filtro Omitir NA




```


### GEIH Descr_iption
```{r GEIH}

summary(Datos_18$mes)

```

### Process of acquiring the data



### Data cleaning process

```{r Transformation, include=FALSE}
# 1. Only on employed individuals older than 18 years old
# 2. Observations with missing data or 0 wages

```


### Descriptive Analysis

```{r Descriptive}


 

## Tables

## Deeper Analysis

## Justification for the data choices


```

## Age-wage profile

A great deal of evidence in Labor economics suggests that the typical worker’s age-wage profile has a predictable path: “Wages tend to be low when the worker is young; they rise as the worker ages, peaking at about age 50; and the wage rate tends to remain stable or decline slightly after age 50”

###  Estimate the Age-wage profile
$$
Log(w)=/beta_1+/beta_2Age+/beta_3Age^2+u
$$





This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


# Notas
Sustentar todas las medidas que salgan en las regresiones
Exportar salidas de regresión con stargazer